const fs = require('fs');
const path = require('path');

// 労働災害リスクの高い重要条文（約100件）
// 条文番号と簡潔な概要のみ
const essentialLaws = [
  // === 労働安全衛生法 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "20",
    title: "事業者の危険防止措置義務",
    summary: "機械・爆発物・電気等による危険を防止するため必要な措置を講じる義務"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "21",
    title: "作業方法等の危険防止",
    summary: "掘削・荷役・伐木等の作業方法や墜落・崩壊等の危険を防止する措置"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "22",
    title: "健康障害防止措置",
    summary: "化学物質・放射線・騒音・振動等による健康障害を防止する措置"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "59",
    title: "安全衛生教育",
    summary: "雇入れ時・作業内容変更時の安全衛生教育の実施義務"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "61",
    title: "就業制限",
    summary: "クレーン・フォークリフト等の危険有害業務は有資格者のみ就業可能"
  },

  // === 労働安全衛生規則（機械関係） ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "107",
    title: "機械の運転停止",
    summary: "機械の掃除・注油・検査・修理時は運転を停止し、起動装置に表示"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "130",
    title: "動力伝達装置の覆い",
    summary: "回転軸・歯車・ベルト等の動力伝達部分には覆いや囲いを設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "131",
    title: "工作用機械の刃部の覆い",
    summary: "丸のこ・帯のこ等の刃部には覆いや囲いを設置"
  },

  // === 墜落・転落防止 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "518",
    title: "作業床の設置",
    summary: "高さ2m以上の作業場所には作業床を設け、墜落防止措置を講じる"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "519",
    title: "開口部等の囲い",
    summary: "墜落の危険がある開口部には囲い・手すり・覆い等を設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "521",
    title: "安全帯等の使用",
    summary: "墜落防止設備を設けることが困難な場合は安全帯等を使用させる"
  },

  // === 足場関係 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "655",
    title: "足場の点検",
    summary: "足場の組立て・変更後、悪天候後は作業開始前に点検を実施"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "563",
    title: "足場の組立て等の作業主任者",
    summary: "高さ5m以上の足場の組立て・解体・変更作業は作業主任者を選任"
  },

  // === 車両系建設機械 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "151",
    title: "車両系建設機械の用途外使用の制限",
    summary: "車両系建設機械は用途以外の用途に使用してはならない"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "157",
    title: "主たる用途以外の使用の制限",
    summary: "転倒・転落等の危険がある場合は主たる用途以外に使用禁止"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "158",
    title: "接触の防止",
    summary: "車両系建設機械の運転で労働者に危険がある場合は誘導者を配置"
  },

  // === フォークリフト ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "151の2",
    title: "フォークリフトの制限速度",
    summary: "構内でのフォークリフト走行時は制限速度を定め遵守させる"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "151の10",
    title: "フォークリフトの荷の積載",
    summary: "荷を最高位に上げたままでの運搬は禁止"
  },

  // === クレーン ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "194",
    title: "合図",
    summary: "クレーン作業では一定の合図を定め、合図者を指名する"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "195",
    title: "立入禁止",
    summary: "つり荷の下には労働者を立ち入らせてはならない"
  },

  // === 化学物質 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "576",
    title: "掲示",
    summary: "有機溶剤等を製造・取扱う作業場には注意事項を掲示"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "577",
    title: "有機溶剤の区分の表示",
    summary: "有機溶剤の容器・貯蔵タンクには種類・人体に及ぼす作用を表示"
  },

  // === 保護具 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "539",
    title: "保護帽の着用",
    summary: "物体の飛来・落下、墜落、感電の危険がある作業では保護帽着用"
  },

  // === 通路・作業場 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "540",
    title: "通路",
    summary: "通路の幅確保、安全な通行確保、つまずき・滑り防止、障害物除去"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "541",
    title: "床面",
    summary: "作業場の床は適度に滑りにくく、つまずきにくい構造とする"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "543",
    title: "照明",
    summary: "作業場の作業面の照度を適切に保つ"
  },

  // === 健康管理 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "44",
    title: "雇入時健康診断",
    summary: "常時使用する労働者を雇入れる際は健康診断を実施"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "45",
    title: "定期健康診断",
    summary: "1年以内ごとに1回、定期健康診断を実施"
  },

  // === VDT作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "607の2",
    title: "VDT作業の作業管理",
    summary: "情報機器作業での作業時間・休憩時間の適切な設定、作業姿勢の指導"
  },

  // === 熱中症予防 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "617",
    title: "休憩の設備",
    summary: "坑内等での作業では労働者が身体を休めることのできる設備を設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "618",
    title: "休養室又は休養所",
    summary: "常時50人以上使用時は男女別の休養室・休養所を設置"
  },

  // === 玉掛け作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "221",
    title: "玉掛け用具の安全係数",
    summary: "つりチェーン・ワイヤロープ等の玉掛け用具は安全係数5以上"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "222",
    title: "玉掛け用ワイヤロープの廃棄",
    summary: "著しい損傷・腐食・変形があるワイヤロープは使用禁止"
  },

  // === 足場（追加） ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "562",
    title: "足場の組立て等の作業",
    summary: "足場の組立て・解体・変更作業の安全基準"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "564",
    title: "悪天候時の作業禁止",
    summary: "強風・大雨・大雪等の悪天候時は高所作業を中止"
  },

  // === 掘削作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "355",
    title: "明り掘削の作業主任者",
    summary: "掘削面の高さ2m以上の掘削作業は作業主任者を選任"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "358",
    title: "地山の崩壊等による危険の防止",
    summary: "掘削面の勾配を適正に保つ、土止め支保工を設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "361",
    title: "掘削面の点検",
    summary: "掘削作業開始前に地山の変化を点検"
  },

  // === 酸素欠乏 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "585",
    title: "酸素欠乏危険作業主任者",
    summary: "酸素欠乏危険場所での作業は作業主任者を選任"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "586",
    title: "酸素濃度の測定",
    summary: "作業開始前・作業中に酸素濃度を測定"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "590",
    title: "換気",
    summary: "酸素欠乏の危険がある場所では換気を実施"
  },

  // === 電気作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "332",
    title: "電気機械器具の囲い等",
    summary: "充電部分が露出している電気機械器具には囲い・絶縁覆いを設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "339",
    title: "停電作業",
    summary: "電路の点検・修理等は電路を停電し、通電禁止の表示"
  },

  // === 溶接・溶断 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "263",
    title: "アーク溶接等の作業",
    summary: "アーク溶接等の作業では特別教育を実施"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "314",
    title: "ガス溶接等の業務",
    summary: "ガス溶接技能講習修了者等でなければ作業禁止"
  },

  // === 爆発・火災防止 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "257",
    title: "火気等の管理",
    summary: "引火性物質を取り扱う場所での火気使用禁止、立入禁止措置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "279",
    title: "乾燥設備の防爆構造",
    summary: "引火性物質の乾燥設備は爆発・火災防止措置"
  },

  // === 騒音 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "600",
    title: "騒音の伝ぱの防止",
    summary: "著しい騒音を発する屋内作業場では伝ぱの防止措置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "595",
    title: "聴力検査",
    summary: "著しい騒音を発する場所での業務に常時従事する労働者は聴力検査"
  },

  // === 粉じん ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "582",
    title: "粉じん作業における措置",
    summary: "粉じん作業では発散防止措置、換気装置の設置"
  },

  // === 安全管理体制 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "10",
    title: "総括安全衛生管理者",
    summary: "一定規模の事業場では総括安全衛生管理者を選任"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "11",
    title: "安全管理者",
    summary: "一定規模・業種の事業場では安全管理者を選任"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "12",
    title: "衛生管理者",
    summary: "一定規模の事業場では衛生管理者を選任"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "13",
    title: "産業医",
    summary: "一定規模の事業場では産業医を選任し健康管理を実施"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "14",
    title: "作業主任者",
    summary: "危険有害作業では作業主任者を選任し労働者を指揮"
  },

  // === 安全衛生委員会 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "17",
    title: "安全委員会",
    summary: "一定業種・規模の事業場では安全委員会を設置"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "18",
    title: "衛生委員会",
    summary: "一定規模の事業場では衛生委員会を設置"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "19",
    title: "安全衛生委員会",
    summary: "安全委員会と衛生委員会を統合して安全衛生委員会を設置可能"
  },

  // === 元方事業者の責務 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "29",
    title: "元方事業者の講ずべき措置",
    summary: "元方事業者は関係請負人に対し必要な指導を実施"
  },
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "30",
    title: "特定元方事業者の講ずべき措置",
    summary: "協議組織の設置、作業連絡調整、現場巡視等を実施"
  },

  // === プレス・シャー等 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "133",
    title: "プレス機械の安全装置",
    summary: "動力プレスには安全装置を設け有効に機能させる"
  },

  // === はい作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "427",
    title: "はいの崩壊防止",
    summary: "荷の積み重ねは適正な高さ、こう配を保ち崩壊防止"
  },

  // === 荷役作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "151の70",
    title: "荷役作業の合図",
    summary: "トラック荷台での荷の積卸し作業では一定の合図を定める"
  },

  // === 伐木作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "477",
    title: "伐木作業の禁止",
    summary: "強風・大雨・大雪等の悪天候時の伐木作業禁止"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "478",
    title: "伐木作業の合図",
    summary: "伐木作業では一定の合図を定める"
  },

  // === 高所作業車 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "194の11",
    title: "高所作業車の作業床の使用",
    summary: "作業床での立ち上がり、移動等の制限"
  },

  // === ボイラー ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "90",
    title: "ボイラーの自動制御装置",
    summary: "ボイラーには安全弁、圧力計等の安全装置を設置"
  },

  // === 圧力容器 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "170",
    title: "圧力容器の安全弁",
    summary: "圧力容器には安全弁、圧力計を設置"
  },

  // === 潜水作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "190",
    title: "潜水作業者の携行物",
    summary: "潜水作業者には信号索、鋭利な刃物等を携行させる"
  },

  // === 振動工具 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "593",
    title: "振動工具の使用時間の制限",
    summary: "チェーンソー等の振動工具は1日の使用時間を適正に制限"
  },

  // === 腰痛予防 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "656",
    title: "腰部保護ベルトの使用",
    summary: "重量物取扱い作業では必要に応じ腰部保護ベルトを使用"
  },

  // === 作業環境測定 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "65",
    title: "作業環境測定",
    summary: "一定の有害業務を行う作業場では作業環境測定を実施"
  },

  // === 安全装置の除去禁止 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "29",
    title: "安全装置等の有効保持",
    summary: "安全装置・保護具は常時有効に保持"
  },

  // === 特別教育 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "59",
    title: "安全衛生教育",
    summary: "危険有害業務就業時は特別教育を実施"
  },

  // === リスクアセスメント ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "28の2",
    title: "危険性又は有害性等の調査",
    summary: "危険性・有害性を調査し労働災害防止措置を実施"
  },

  // === 危険物・有害物の表示 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "57",
    title: "危険有害物の容器等への表示",
    summary: "危険有害物の容器・包装には名称、人体に及ぼす作用を表示"
  },

  // === 安全データシート（SDS） ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "57の2",
    title: "危険有害物の文書交付",
    summary: "危険有害物を譲渡・提供する際はSDSを交付"
  },

  // === 定期自主検査 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "45",
    title: "定期自主検査",
    summary: "ボイラー・クレーン等の機械設備は定期に自主検査を実施"
  },

  // === 就業禁止 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "68",
    title: "病者の就業禁止",
    summary: "伝染病・精神障害等で他人に感染のおそれがある者は就業禁止"
  },

  // === 安全衛生改善計画 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "78",
    title: "安全衛生改善計画",
    summary: "重大な労働災害発生時は安全衛生改善計画の作成指示"
  },

  // === コンクリート破砕作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "380",
    title: "コンクリート破砕器作業主任者",
    summary: "コンクリート破砕作業では作業主任者を選任"
  },

  // === ずい道等の建設作業 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "383",
    title: "ずい道等の掘削作業主任者",
    summary: "ずい道・たて坑等の掘削作業では作業主任者を選任"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "389",
    title: "可燃性ガスの濃度測定",
    summary: "ずい道等の掘削では可燃性ガス濃度を測定"
  },

  // === 型枠支保工 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "239",
    title: "型枠支保工の組立て等の作業主任者",
    summary: "型枠支保工の組立て・解体作業は作業主任者を選任"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "240",
    title: "型枠支保工の構造",
    summary: "型枠支保工は荷重に耐える堅固な構造とする"
  },

  // === コンベヤー ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "145",
    title: "コンベヤーの非常停止装置",
    summary: "コンベヤーには非常停止装置を設置"
  },

  // === ロール機 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "138",
    title: "ロール機の覆い",
    summary: "ロール機の回転部分には覆い・囲い・ガードを設置"
  },

  // === 研削といし ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "117",
    title: "研削といしの覆い",
    summary: "研削といしには覆いを設け、破裂による危険を防止"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "118",
    title: "研削といしの試運転",
    summary: "研削といし取付け後は試運転を実施"
  },

  // === 木材加工用機械 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "121",
    title: "丸のこ盤の歯の接触予防装置",
    summary: "丸のこ盤には歯の接触予防装置を設置"
  },

  // === 移動はしご ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "527",
    title: "移動はしごの転位防止",
    summary: "移動はしごは転位防止措置を講じる"
  },

  // === 脚立 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "528",
    title: "脚立の構造",
    summary: "脚立は堅固な構造とし、転倒・滑動を防止"
  },

  // === 安全帯等（追加） ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "130の5",
    title: "安全帯等の取付設備",
    summary: "安全帯等を安全に取り付けるための設備を設置"
  },

  // === 局所排気装置 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "576",
    title: "局所排気装置の設置",
    summary: "有機溶剤・粉じん等を発散する作業場では局所排気装置を設置"
  },
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "577",
    title: "局所排気装置の性能要件",
    summary: "局所排気装置は厚生労働大臣の定める性能を有する"
  },

  // === 呼吸用保護具 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "593の2",
    title: "呼吸用保護具の使用",
    summary: "化学物質等にばく露する作業では呼吸用保護具を使用"
  },

  // === 救護措置 ===
  {
    law: "労働安全衛生規則",
    lawId: "347M50002000032",
    article: "635",
    title: "救急用具",
    summary: "負傷者の手当に必要な救急用具・材料を備える"
  },

  // === 報告 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "100",
    title: "労働災害等の報告",
    summary: "労働者が労働災害により死傷した場合は遅滞なく報告"
  },

  // === 計画の届出 ===
  {
    law: "労働安全衛生法",
    lawId: "347AC0000000057",
    article: "88",
    title: "機械等設置届",
    summary: "一定の機械等を設置・移転する際は事前に届出"
  }
];

// JSONデータを生成
const lawItems = essentialLaws.map(law => ({
  question: `【法令】${law.law} 第${law.article}条${law.title ? `（${law.title}）` : ''}`,
  answer: `${law.summary}\n詳細: https://laws.e-gov.go.jp/law/${law.lawId}#Mp-At_${law.article}`,
  keywords: ["法令", law.law, law.title, `第${law.article}条`]
}));

console.log(`${essentialLaws.length}件の重要条文を作成しました\n`);

// カテゴリー別に集計
const byLaw = {};
essentialLaws.forEach(item => {
  byLaw[item.law] = (byLaw[item.law] || 0) + 1;
});

console.log('法令別内訳:');
Object.entries(byLaw).forEach(([law, count]) => {
  console.log(`  ${law}: ${count}件`);
});

// ファイルに保存
fs.writeFileSync(
  path.join(__dirname, 'essential-laws.json'),
  JSON.stringify(lawItems, null, 2),
  'utf8'
);

console.log('\n✓ essential-laws.json に保存しました');

// サンプル表示
console.log('\n--- サンプル（最初の5件）---');
lawItems.slice(0, 5).forEach((item, i) => {
  console.log(`\n${i + 1}. ${item.question}`);
  console.log(`   ${item.answer}`);
});
