const fs = require('fs');
const path = require('path');

// 主要な法令条文データ
const lawArticles = [
  {
    question: "【法令】労働安全衛生法 第1条（目的）",
    answer: "労働安全衛生法は、労働基準法と相まって、労働災害の防止のための危害防止基準の確立、責任体制の明確化及び自主的活動の促進の措置を講ずる等、総合的計画的に安全衛生対策を推進し、職場の安全衛生の水準向上を図ることを目的としています。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "目的", "労働災害防止"]
  },
  {
    question: "【法令】労働安全衛生法 第3条（事業者の責務）",
    answer: "事業者は、単に労働災害防止のための最低基準を守るだけでなく、快適な職場環境の実現と労働条件の改善を通じて、職場の安全衛生の水準向上に努めなければなりません。また、国が実施する安全衛生施策に協力する責務があります。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "事業者の責務", "職場環境"]
  },
  {
    question: "【法令】労働安全衛生法 第4条（労働者の責務）",
    answer: "労働者は、労働災害を防止するために必要な事項を守るほか、事業者等が実施する安全衛生措置に協力するよう努めなければなりません。労働者にも安全衛生への積極的な協力が求められます。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "労働者の責務", "安全協力"]
  },
  {
    question: "【法令】労働安全衛生法 第11条（安全管理者）",
    answer: "一定規模以上の事業場では、安全管理者を選任し、安全に係る技術的事項を管理させなければなりません。安全管理者は、作業場の巡視、危険防止措置の確認、安全装置等の定期的点検等を行います。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "安全管理者", "選任"]
  },
  {
    question: "【法令】労働安全衛生法 第12条（衛生管理者）",
    answer: "一定規模以上の事業場では、衛生管理者を選任し、衛生に係る技術的事項を管理させなければなりません。衛生管理者は、作業環境の衛生上の調査、作業条件・施設等の衛生上の改善、労働衛生保護具の点検等を行います。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "衛生管理者", "選任"]
  },
  {
    question: "【法令】労働安全衛生法 第13条（安全衛生推進者等）",
    answer: "安全管理者・衛生管理者の選任義務がない規模の事業場でも、安全衛生推進者または衛生推進者を選任し、安全衛生に係る業務を担当させなければなりません。小規模事業場でも安全衛生管理体制の整備が必要です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "安全衛生推進者", "衛生推進者"]
  },
  {
    question: "【法令】労働安全衛生法 第14条（産業医）",
    answer: "常時50人以上の労働者を使用する事業場では、産業医を選任し、労働者の健康管理等を行わせなければなりません。産業医は、健康診断の実施・結果に基づく措置、作業環境の維持管理、健康教育・健康相談等を行います。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "産業医", "健康管理"]
  },
  {
    question: "【法令】労働安全衛生法 第15条（総括安全衛生管理者）",
    answer: "一定規模以上の事業場では、総括安全衛生管理者を選任し、安全管理者・衛生管理者を指揮させるとともに、安全衛生業務を統括管理させなければなりません。安全衛生管理体制の要となる管理者です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "総括安全衛生管理者", "統括管理"]
  },
  {
    question: "【法令】労働安全衛生法 第17条（作業主任者）",
    answer: "高圧室内作業、ガス溶接等の特定作業では、作業主任者を選任し、作業に従事する労働者の指揮等を行わせなければなりません。危険・有害な作業における安全確保のための専門的な管理者です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "作業主任者", "特定作業"]
  },
  {
    question: "【法令】労働安全衛生法 第20条（事業者の講ずべき措置等）",
    answer: "事業者は、機械・器具等による危険を防止するため、必要な措置を講じなければなりません。具体的には、危険な作業の方法禁止、安全装置の設置、作業環境の整備等が含まれます。労働災害防止の基本的義務です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "事業者の措置", "危険防止"]
  },
  {
    question: "【法令】労働安全衛生法 第21条（特定元方事業者の講ずべき措置）",
    answer: "建設業・造船業の特定元方事業者は、関係請負人・その労働者が当該場所で作業を行う場合、安全衛生協議組織の設置・運営、作業間の連絡調整等を行わなければなりません。複数事業者が混在する現場の安全確保が目的です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "特定元方事業者", "協議組織"]
  },
  {
    question: "【法令】労働安全衛生法 第59条（安全衛生教育）",
    answer: "事業者は、労働者を雇い入れた時、作業内容を変更した時には、安全衛生教育を行わなければなりません。また、危険・有害な業務では特別教育が必要です。労働災害防止には適切な教育が不可欠です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "安全衛生教育", "特別教育"]
  },
  {
    question: "【法令】労働安全衛生法 第61条（就業制限）",
    answer: "クレーン運転、ボイラー取扱い等の特定業務は、免許を受けた者または技能講習を修了した者でなければ就かせてはなりません。高度な知識・技能を要する危険業務への無資格者の就業を禁止しています。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "就業制限", "免許", "技能講習"]
  },
  {
    question: "【法令】労働安全衛生法 第66条（健康診断）",
    answer: "事業者は、労働者に対して雇入時・定期の健康診断を行わなければなりません。また、有害業務従事者には特殊健康診断が必要です。労働者の健康状態を把握し、健康障害を予防するための重要な措置です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "健康診断", "特殊健康診断"]
  },
  {
    question: "【法令】労働安全衛生法 第88条（計画の届出等）",
    answer: "建設物・機械等の設置、移転、主要構造部分の変更等を行う場合は、工事開始前に計画を労働基準監督署長に届け出なければなりません。一定規模以上の工事では審査を受ける必要があります。重大な災害を未然に防ぐための事前審査制度です。詳細: https://laws.e-gov.go.jp/law/347AC0000000057",
    keywords: ["法令", "労働安全衛生法", "計画届", "事前審査"]
  },
  {
    question: "【法令】労働安全衛生法施行令 第6条（安全管理者を選任すべき事業場）",
    answer: "安全管理者は、常時50人以上の労働者を使用する製造業、建設業、運送業等の事業場で選任が必要です。業種と規模により選任義務が定められています。詳細: https://laws.e-gov.go.jp/law/347CO0000000318",
    keywords: ["法令", "施行令", "安全管理者", "選任義務"]
  },
  {
    question: "【法令】労働安全衛生法施行令 第22条（就業制限に係る業務）",
    answer: "クレーン・移動式クレーンの運転、発破の業務、ボイラーの取扱い、ガス溶接等の作業等、17の業務が就業制限業務として指定されています。これらは免許または技能講習修了が必要です。詳細: https://laws.e-gov.go.jp/law/347CO0000000318",
    keywords: ["法令", "施行令", "就業制限業務", "免許"]
  },
  {
    question: "【法令】労働安全衛生規則 第34条（雇入れ時の安全衛生教育）",
    answer: "雇入れ時の安全衛生教育では、機械等の危険性・有害性、安全装置・保護具の使用方法、作業手順、事故時の措置等について教育しなければなりません。新規採用者の災害防止に重要な教育です。詳細: https://laws.e-gov.go.jp/law/347M50002000032",
    keywords: ["法令", "規則", "雇入れ時教育", "安全衛生教育"]
  },
  {
    question: "【法令】労働安全衛生規則 第36条（特別教育を必要とする業務）",
    answer: "アーク溶接、フォークリフト運転、高所作業車運転、粉じん作業等、41の業務で特別教育が必要です。学科教育と実技教育の時間が定められており、修了者のみが就業できます。詳細: https://laws.e-gov.go.jp/law/347M50002000032",
    keywords: ["法令", "規則", "特別教育", "教育時間"]
  },
  {
    question: "【法令】労働安全衛生規則 第564条（作業主任者の選任を必要とする作業）",
    answer: "高圧室内作業、ガス溶接作業、木材加工用機械作業等、19の作業で作業主任者の選任が必要です。各作業に対応した技能講習の修了者から選任します。詳細: https://laws.e-gov.go.jp/law/347M50002000032",
    keywords: ["法令", "規則", "作業主任者", "技能講習"]
  }
];

// knowledge.jsonファイルのパス
const knowledgePath = path.join(__dirname, 'data', 'knowledge.json');

// knowledge.jsonを読み込み
const knowledge = JSON.parse(fs.readFileSync(knowledgePath, 'utf8'));

// 法令カテゴリーを探すか、なければ作成
let lawCategory = knowledge.categories.find(cat => cat.id === 'laws');

if (!lawCategory) {
  lawCategory = {
    id: 'laws',
    name: '法令条文',
    items: []
  };
  knowledge.categories.unshift(lawCategory); // 最初に追加
}

// 既存の法令記事をクリア（重複を避けるため）
lawCategory.items = lawArticles;

// メタデータを更新
knowledge.metadata.last_updated = new Date().toISOString().split('T')[0];

// knowledge.jsonに書き込み
fs.writeFileSync(knowledgePath, JSON.stringify(knowledge, null, 2), 'utf8');

console.log(`✓ ${lawArticles.length}件の法令条文を追加しました`);
console.log('✓ knowledge.jsonを更新しました');
